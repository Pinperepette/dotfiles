# @gf3’s Sexy Bash Prompt, inspired by “Extravagant Zsh Prompt”
# Shamelessly copied from https://github.com/gf3/dotfiles
# Screenshot: http://i.imgur.com/s0Blh.png

if [[ $COLORTERM = gnome-* && $TERM = xterm ]] && infocmp gnome-256color >/dev/null 2>&1; then
	export TERM=gnome-256color
elif infocmp xterm-256color >/dev/null 2>&1; then
	export TERM=xterm-256color
fi

TEXT_BLACK='\e[0;30m'
TEXT_RED='\e[0;31m'
TEXT_GREEN='\e[0;32m'
TEXT_YELLOW='\e[0;33m'
TEXT_BLUE='\e[0;34m'
TEXT_PURPLE='\e[0;35m'
TEXT_CYAN='\e[0;36m'
TEXT_WHITE='\e[0;37m'
  
BOLD_BLACK='\e[1;30m'
BOLD_RED='\e[1;31m'
BOLD_GREEN='\e[1;32m'
BOLD_YELLOW='\e[1;33m'
BOLD_BLUE='\e[1;34m'
BOLD_PURPLE='\e[1;35m'
BOLD_CYAN='\e[1;36m'
BOLD_WHITE='\e[1;37m'
  
UNDER_BLACK='\e[4;30m'
UNDER_RED='\e[4;31m'
UNDER_GREEN='\e[4;32m'
UNDER_YELLOW='\e[4;33m'
UNDER_BLUE='\e[4;34m'
UNDER_PURPLE='\e[4;35m'
UNDER_CYAN='\e[4;36m'
UNDER_WHITE='\e[4;37m'
  
BACK_BLACK='\e[40m'
BACK_RED='\e[41m'
BACK_GREEN='\e[42m'
BACK_YELLOW='\e[43m'
BACK_BLUE='\e[44m'
BACK_PURPLE='\e[45m'
BACK_CYAN='\e[46m'
BACK_WHITE='\e[47m'
  
RESET='\e[0m'


function parse_git_dirty() {
        [[ $(git status 2> /dev/null | tail -n1) != "nothing to commit (working directory clean)" && $(git status 2> /dev/null | tail -n1) != "nothing to commit, working directory clean" ]] && echo "*"
}

function parse_git_branch() {
	git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e "s/* \(.*\)/\1$(parse_git_dirty)/"
}

export PS1="$BOLD_RED\u$TEXT_WHITE at $BOLD_YELLOW\h$TEXT_WHITE in $BOLD_GREEN\w$BOLD_WHITE\$([[ -n \$(git branch 2> /dev/null) ]] && echo \" on \")$BOLD_PURPLE\$(parse_git_branch)$TEXT_WHITE \$ $RESET"
export PS2="$BOLD_YELLOW→ $RESET"
